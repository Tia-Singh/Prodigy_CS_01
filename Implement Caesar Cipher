def caesar_cipher(text, shift, encrypt=True):
    result = []
    shift = shift if encrypt else -shift

    for char in text:
        if char.isalpha():
            shift_base = 65 if char.isupper() else 97
            result.append(
                chr((ord(char) - shift_base + shift) % 26 + shift_base))
        else:
            result.append(char)

    return ''.join(result)


def main():
    print("Caesar Cipher Program")
    while True:
        try:
            choice = input(
                "Do you want to (e)ncrypt or (d)ecrypt? ").strip().lower()
            if choice not in {'e', 'd'}:
                raise ValueError(
                    "Invalid choice. Please enter 'e' for encryption or 'd' for decryption."
                )

            text = input("Enter the text: ").strip()
            shift = int(input("Enter the shift value: ").strip())

            if choice == 'e':
                result = caesar_cipher(text, shift, encrypt=True)
                print(f"Encrypted text: {result}")
            else:
                result = caesar_cipher(text, shift, encrypt=False)
                print(f"Decrypted text: {result}")

            break
        except ValueError as e:
            print(e)


if __name__ == "__main__":
    main()
